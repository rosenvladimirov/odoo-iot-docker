# ============================================
# TRAEFIK DYNAMIC CONFIGURATION - TLS
# ============================================

tls:
  # === TLS Options ===
  options:
    default:
      minVersion: VersionTLS12
      cipherSuites:
        - TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256
        - TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384
        - TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305
      sniStrict: false

    modern:
      minVersion: VersionTLS13

  # === Certificates ===
  certificates:
    # Локален домейн – сертификат от Step-CA
    - certFile: /step-ca/certs/cert.pem
      keyFile: /step-ca/certs/key.pem
      stores:
        - default

    # Публичен домейн – сертификат, изтеглен от Odoo
    - certFile: /step-ca/certs/odoo-public-cert.pem
      keyFile: /step-ca/certs/odoo-public-key.pem
      stores:
        - default

  # === Certificate Store ===
  stores:
    default:
      # Default certificate (fallback), използва локалния Step-CA сертификат
      defaultCertificate:
        certFile: /step-ca/certs/cert.pem
        keyFile: /step-ca/certs/key.pem
